const express = require("express");
const bodyParser = require("body-parser");
const cors = require("cors");

const app = express();
app.use(bodyParser.json());
app.use(cors());

// Almacenamiento en memoria
let turnos = [];

// Ruta para guardar un turno
app.post("/api/turnos", (req, res) => {
    const { nombre, turno } = req.body;
    if (!nombre || !turno) {
        return res.status(400).json({ message: "Faltan datos." });
    }
    turnos.push({ nombre, turno });
    return res.status(201).json({ message: "Turno registrado exitosamente." });
});

// Ruta para obtener todos los turnos
app.get("/api/turnos", (req, res) => {
    res.json(turnos);
});

// Ruta para eliminar un turno especÃ­fico
app.delete("/api/turnos/:turno", (req, res) => {
    const turno = parseInt(req.params.turno, 10);
    turnos = turnos.filter(t => t.turno !== turno);
    res.json({ message: `Turno ${turno} eliminado.` });
});

// Iniciar el servidor
const PORT = 3000;
app.listen(PORT, () => {
    console.log(`Servidor corriendo en [http://localhost:${PORT}`)]http://localhost:${PORT}`);
});
